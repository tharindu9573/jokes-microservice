ARG BASE_URL
ARG RMQ_URL
ARG MYSQL_ROOT_PASSWORD
ARG MYSQL_CONTAINER_PORT
ARG MOD_CONTAINER_PORT
ARG MOD_QUEUE_NAME
ARG PORT
ARG SERVICE_NAME

FROM node:slim

ENV NODE_ENV development
ENV BASE_URL=$BASE_URL
ENV RMQ_URL=$RMQ_URL
ENV MYSQL_ROOT_PASSWORD=$MYSQL_ROOT_PASSWORD
ENV MYSQL_CONTAINER_PORT=$MYSQL_CONTAINER_PORT
ENV MOD_CONTAINER_PORT=$MOD_CONTAINER_PORT
ENV MOD_QUEUE_NAME=$MOD_QUEUE_NAME
ENV PORT=$PORT
ENV SERVICE_NAME=$SERVICE_NAME

WORKDIR /express-docker

COPY . .

RUN npm install

CMD ["npm", "start"]

EXPOSE 3001